<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Solitude - Happenings</title>
  <meta name="author" content="Solitude" />
  <meta name="twitter:widgets:csp" content="on" />
  <meta name="description" content="The blog of Solitude" />
  <link rel="canonical" href="https://solitude.vkps.co.uk/page/48/" />

  <link href="//fonts.googleapis.com/css?family=Open+Sans:600,800" rel="stylesheet" type="text/css">
  <link rel="shortcut icon" href="/favicon.ico">
  <link rel="alternate" type="application/atom+xml" title="Solitude" href="https://solitude.vkps.co.uk/atom.xml" />
  <link rel="stylesheet" href="/assets/css/all.css">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha256-k2/8zcNbxVIh5mnQ52A0r3a6jAgMGxFJFE2707UxGCk= sha512-ZV9KawG2Legkwp3nAlxLIVFudTauWuBpC10uEafMHYL0Sarrz5A7G79kXh5+5+woxQ5HM559XX2UZjMJ36Wplg==" crossorigin="anonymous">
</head>
<body>
  <div class="container">
    <div class="four columns sidebar">
      <nav>
  <h1><a href="/">Solitude</a></h1>
  <a href="/">
    
    <img src="/assets/images/tree-160.jpg" id="solitude-logo" alt="Solitude logo"/>
    
  </a>
  <div id="bio">
    <p>Technology. Code. Living relentlessly in the real world.</p>
  </div>
  <nav>
    <ul>
      <li><a href="/about/">About</a></li>
      <li><a href="/Archives/">Archives</a></li>
    </ul>
  </nav>
  <div id="social">
    Follow me:
<div id="stalker">
  

  

  

  

  

  
  <a title="garyfleming on Twitter" href="https://twitter.com/garyfleming">
    <i class="fa fa-twitter-square"></i>
  </a>
  

  

  

  

  

  

  
  <a title="Atom feed" id="atom" href="/feed.xml">
    <i class="fa fa-rss-square"></i>
  </a>
  
</div>

  </div>
  
</nav>

    </div>

    <div class="eleven columns content">
      <div id="home">
  <h2><i class="fa fa-bookmark"></i> Happenings</h2>

  
  <div class="postcontainer">
  <h3><a href="/Archives/2008/10/03/film-fight-august-2008/">Film Fight: August 2008</a></h1>
  <p class="author">
    <span class="date"> </span>
  </p>
  <div class="post">
    <p>Yes, it’s quite late again, which is surprising given there are only three films. Let’s see how they get on.</p>

<p>First up is <strong>Get Smart</strong>, the story of a bumbling agent in a hand-wavingly explained government spy agency. Ostensibly a comedy, the director manages to fumble the fundamentals with the film suffering from poorly explained sequences, predictability, an over-reliance on slapstick and poor stereotypes. There are funny moments in there (such as the brief fighter jet segment) and the cast (the otherwise excellent Steve Carrell and Alan Arkin) do their best, but there’s simply not much here. A shame.</p>

<p>Shane Meadows has created some of the finest moments in recent British cinema, from Dead Man’s Shoes bleak and grimy revenge story to This Is England’s look at hooliganism and growing up around the wrong people. Unfortunately his run seems to have run out with <strong>Somers Town</strong>, the story of a boy who has run away to London and befriends a Polish immigrant. Ignoring the pretty obvious shoe-horning of adverts into the work, the plot and characters really lack any depth. The relationships seem hollow and forced, and nothing comes across as natural. Worse, the story really doesn’t go anywhere, with a painful happy ending tacked in rather than dealing with any of the issues raised early on. Had the film focussed on the relationship between the Polish boy and his father, and their lives in London, then maybe it could have done something, but this cut shows the film as shallow; a real pity.</p>

<p>Finally, <strong>Step Brothers</strong> sees Will Ferrell reunite with collaborator John C. Reilly as two 40-year old brats who still live with their now-married parents. The problem here is that there are very few jokes or funny moments and they almost all extend from this one premise, making the film feel a bit of a one-note wonder. Sure, there are some very funny bits (the wife of Ferrell’s brother is particularly good) but there’s also a lot of dead weight and barely thought out ideas. Still worth seeing, but not up to previous films that duo have worked on together.</p>

<p>So, it’s a bit of a weak recommendation but the winner is <strong>Step Brothers</strong>.</p>

  </div>
  <div class="divider"><img src="/assets/images/divider.png" /></div>
  </div>
  
  <div class="postcontainer">
  <h3><a href="/Archives/2008/08/23/film-fight-july-2008/">Film Fight: July 2008</a></h1>
  <p class="author">
    <span class="date"> </span>
  </p>
  <div class="post">
    <p>Only 4 films this month:</p>

<p>First up is Frank Darabont’s take on Stephen King’s <strong>The Mist</strong>. Amongst filmed versions of King’s work, it ranks amongst the most subtle and controlled pieces. Rather than explicitly showing everything that happened (creatures coming from another dimension and covering the world in a deep fog) and giving us another brainless monster/horror piece, Darabont has focussed on the real heart of the story: the tension between believers and non-believers, through a fairly cunningly chosen bunch of set-pieces. Slowly, different fears and prejudices seep through a group trapped in a supermarket until they inevitably turn on one another. The way this is done is masterful, and the climax is pretty heartbreaking, cheapened only slightly by an unnecessary denouement. The characters themselves are fairly one-dimensional, but that’s the point: they’re only aspects of ourselves. Very strong, subtle film-making, though perhaps a shade on the long side. Recommended.</p>

<p>Jack Black continues to dominate Hollywood, moving into animated shenanigans with <strong>Kung-Fu Panda</strong>, the story of a martial arts-obsessed panda who becomes entangled in a years old grudge match to become the best at kung-fu. It’s happy enough, has plenty of laughs, and neat pieces, but is let down by a fairly mediocre performance by the titular character. Black is doing a watered down version of his normal schtick, without really emoting. He’s a great presence, but not much of a voice actor. Still, there’s enough in the film to make it watchable and even enjoyable.</p>

<p>Pixar, on the other hand, are a powerhouse of animated movies and their latest release, <strong>Wall-E</strong>, is no exception. This story of a lonely robot and his first love is set against the backdrop of environmental disaster, and humanity’s laziness. Suffice to say it all works out the way you’d expect, but the story is still worthwhile. More interesting is the style in which the story is told: almost no dialogue, beautiful animation and lots of brilliant realised characters. While it doesn’t go into great depth on any of the key themes, something that is to be expected from a kid’s film, it is a great story and well told. Another hit for Pixar.</p>

<p>Finally, Christopher Nolan continues to redefine the superhero genre in <strong>The Dark Knight</strong>. I’ve discussed this film more than any other in recent memory and I agree with the pervading feeling: it’s extremely good. Heath Ledger is incredible as the Joker, the tone is well set, the cinematography is exceptional, and it’s a thoroughly enjoyable film. That said, it’s not without flaws. Most notable is the burgeoning length and lack of clear focus. Building up Harvey Dent for the fall to become Two-Face was necessary, but then cramming so much of the character into the back half of the movie? It felt forced and pushed the film longer than it could comfortably sustain; that strand could and should have been picked up in the next part of the series. There’s plenty of other cuts that could be made: most of the cast being rendered mere scenery compared to the scene-stealing joker. I could go on (and have in conversation) with list of problems with the movie, but ultimately I enjoyed it, and thought it was a compelling piece of film-making. I recommend it highly.</p>

<p>I’m a little torn for this months’ winner: should it be a subtle horror movie, a brilliant but light story, or a flawed but enjoyable blockbuster? They’re all great films, but I think it’s going to be <strong>The Dark Knight</strong>, largely due to Ledger’s perfectly-pitched attempt at the classic Joker character.</p>

  </div>
  <div class="divider"><img src="/assets/images/divider.png" /></div>
  </div>
  
  <div class="postcontainer">
  <h3><a href="/Archives/2008/08/19/fixing-a-gap-in-javascript/">Fixing a Gap in Javascript</a></h1>
  <p class="author">
    <span class="date"> </span>
  </p>
  <div class="post">
    <p>An interesting problem: a bunch of <a href="http://struts.apache.org/1.2.8/userGuide/dev_nested.html">Struts Nested</a> tags generate HTML. Separately, we write some Javascript that makes use of <code class="language-plaintext highlighter-rouge">getElementById()</code> to find some of the generated elements. This works in Internet Explorer, but fails miserably in <a href="http://www.mozilla.com/firefox/">FireFox</a>. Why?</p>

<p>Well, it turns out that Struts Nested tags generate elements that have a <code class="language-plaintext highlighter-rouge">name</code> attribute but not an <code class="language-plaintext highlighter-rouge">id</code>. Separately, IE actually does the wrong thing with <code class="language-plaintext highlighter-rouge">getElementById()</code>: if a search by id fails, it will try to match by name; that’s fundamentally broken. It’d be fine if a bunch of libraries and other functions didn’t prefer the use of ids, and if other browsers did the same thing. They don’t and we’re stuck with the mess. Let’s clean it up.</p>

<p>The right thing to do would be to <a href="http://www.sixteensmallstones.org/ie-javascript-bugs-overriding-internet-explorers-documentgetelementbyid-to-be-w3c-compliant-exposes-an-additional-bug-in-getattributes">cripple the IE version into the correct behaviour</a>. Now everyone agrees on what should happen.</p>

<p>Let’s assume, though, that this isn’t possible, that there’s a large dependency on this behaviour that cannot be changed for whatever reason: no access to the JS, unwieldy codebase that we don’t have time to fix straight away (bad!), or something else. It’s not really that important. If you need to go for the wrong solution, here’s how:</p>

<p>`</p>
<pre>
document.nativeGetById = document.getElementById;
document.getElementById = function(id){
  var el = document.nativeGetById(id);
  if(el == null){
    el = document.getElementsByName(id)[0];
    if(el != null){el.id=id;}
  }
  return el;
}
</pre>
<p>`

That&#8217;ll work and it&#8217;ll even make sure subsequent calls use the native version of the function for extra speed. Now, there are a couple of small issues with this function and some pretty obvious optimisations, but I&#8217;ll leave that as an exercise for the reader.
</p>

  </div>
  <div class="divider"><img src="/assets/images/divider.png" /></div>
  </div>
  
  <div class="postcontainer">
  <h3><a href="/Archives/2008/08/12/neater-java/">Neater Java</a></h1>
  <p class="author">
    <span class="date"> </span>
  </p>
  <div class="post">
    <p>In Java 5, as all good Java developers will know, Sun introduced the <code class="language-plaintext highlighter-rouge">enum</code> type. Since I’m sure anyone who is interested in what will follow knows that already, I won’t bore you with the details but there’s some decent <a href="http://java.sun.com/j2se/1.5.0/docs/guide/language/enums.html">historical information on Sun’s reasons</a> available. I’m going to be talking a little bit about operations on enums, so let’s get started by defining one:</p>

<p>`</p>
<pre>public enum OrderState{
PENDING, CHECKING_CREDIT, PROCESSING, SHIPPED, RECEIVED, CANCELLED, RETURNED
}</pre>
<p>`

Each of those items in the enumeration represent some state that an order can be in; an order being anything you can buy from an online store. We&#8217;re also going to have a variable called `currentState` which will hold one of these enumerated items. Let&#8217;s not think too hard about how accurate the model is, it&#8217;s really just there as a simple example.

Now imagine that one of our requirements is to enable a button if the currentState is one of several possible states, but not in any other state. For example, the &#8220;Cancel&#8221; button is enabled while the current state is `PENDING`, `PROCESSING`, or `CHECKING_CREDIT`. We&#8217;re doing a containment check, a pretty common operation. The standard Java approach would be:


`
<pre>if(currentState.equals(Order_State.PENDING)|| currentState.equals(Order_State.PROCESSING)|| currentState.equals(Order_State.CHECKING_CREDIT)){
    cancelButton.enable();
}</pre>
<p>`

Yuck! It gets the job done but that is some verbose and ugly code. We know that there&#8217;s got to be a better way, and there is: the [EnumSet](http://java.sun.com/j2se/1.5.0/docs/api/java/util/EnumSet.html) class. EnumSet is a somewhat overlooked Set implementation, specifically for grouping together items from the same Enum. I&#8217;ll let you look into the details of the API, but there are some very handy methods, such as `range()` and `complementOf()`. As a bonus, they&#8217;re also very efficient. How would our example look using an EnumSet?


`
<pre>if(EnumSet.of(Order_State.PENDING, Order_State.PROCESSING, Order_State.CHECKING_CREDIT).contains(currentState)){
    cancelButton.enable();
}</pre>
<p>`

That&#8217;s much better. Rather than a bunch of ORs that look disconnected and have a lot of repeated syntax, we state pretty clearly what we want: build a set of states, and then see whether the current state is part of that set.

There is another neater way of doing this, purely in terms of how syntactically nice it looks, though it requires a little helper function in the Enum. Add the following `in()` method directly to the Enum type:


`
<pre>public boolean in(Order_State... args){
    return EnumSet.copyOf(Arrays.asList(args)).contains(this);
}</pre>
<p>`

Now, we can do our contains check like this:


`
<pre>if(currentState.in(Order_State.PENDING, Order_State.PROCESSING, Order_State.CHECKING_CREDIT)){
    cancelButton.enable();
}</pre>
<p>`

Very tidy: we&#8217;ve got a single method call that expresses exactly what we&#8217;re aiming for in a fluent manner. Now, it does have it&#8217;s downsides like the helper function in the enum, and the fact that EnumSet is more efficient. I&#8217;d suggest, though, that in 99% of cases you&#8217;re not going to be caring about those few extra nanoseconds required to convert to a List first, and that the few seconds of developer time you save every time someone has to read and understand each version more than makes up for it.
</p></p></p></p></p>

  </div>
  <div class="divider"><img src="/assets/images/divider.png" /></div>
  </div>
  
  <div class="postcontainer">
  <h3><a href="/Archives/2008/07/20/postcode-lookups-suck/">Postcode Lookups Suck</a></h1>
  <p class="author">
    <span class="date"> </span>
  </p>
  <div class="post">
    <p>Websites which have address forms for UK residences, whether for buying new products, paying bills or registering interest, I have a simple request: do not presume your database knows my address better than me.</p>

<p>For the benefit of non-UK readers, let me explain. The UK has a system originally designed for mail delivery called the Postcode, which is similar to the US zip code system. Unlike zip codes, it’s far more granular, generally resolving to a handful of addresses. In fact, most of the time, if you have a post code and house number, you can uniquely identify a particular delivery address. That’s all that is needed: a <strong>G1 4BQ</strong> and a <strong>35</strong>.</p>

<p>In 7 characters, most people can be readily identified. That’s the <a href="http://puffbox.com/2008/06/23/the-power-of-postcodes/">power of postcodes</a>.</p>

<p>A lot of UK websites take this as an absolute fact with no room for error. They take the data from the Post Office, see that it works for them, and forget about it. You either fit the pattern, or your house doesn’t exist. I’m sure you can see where I’m going with this.</p>

<p>One big problem is that large parts of the UK have some form of communal housing: tenement blocks, modern apartment blocks, high-rises etc. This is where things break down. As well as having a house number (the 35 above), they will also have a flat number like 3/2 (floor 3, flat 2), 4D (floor 4, flat D) or any other variation on the above. This is where things get very hairy:</p>

<ul>
  <li>Most post-code lookup systems will offer you a list of possible matches, which often miss some of the variations. That’s incomplete reference data.</li>
  <li>Most post-code lookup systems are never given updated data (compile once and you’re done). That’s poor data management.</li>
  <li>Most post-code lookup systems don’t allow for changes to addresses. That’s, again, poor data management.</li>
  <li>Most systems don’t allow for even more complex forms, where a flat has a house number (35, two part flat number (3/2), and a block number (D); the combinations of these can come in endless forms (D3/2, 35 Example St vs. Flat 2, Floor 3, Block D, 35 Example St).</li>
</ul>

<p>Most systems will fall flat in the face of any of these. While fixing these problems directly is hard (to near enough impossible), there’s a very simple solution originally posited by Postel:</p>

<blockquote>
  <p>Be conservative in what you do; be liberal in what you accept from others</p>
</blockquote>

<p>Yes, it’s the simple: just accept whatever your users, <em>the people who live at the address</em>, put into your form. They know the correct answer far better than you ever will, so believe them when they put something in. If you want to help them by offering a post-code lookup, that’s fine, encouraged even; but don’t insist that they use it. That just hurts the usability of your system.</p>

  </div>
  <div class="divider"><img src="/assets/images/divider.png" /></div>
  </div>
  
</div>



<!-- Pagination links -->
<div class="postnavigation">
  
    <a href="/page/47" class="previous">&laquo; Previous</a>
  
  
    <a href="/page/49" class="next">Next &raquo;</a>
  
</div>


      <div class="footer">
        <div class="disclaimer">
  

  <p>
    © Solitude, 2003-22 &mdash; built with <a href="http://jekyllrb.com/">Jekyll</a>, using <a href="https://github.com/swanson/lagom">Lagom</a> as a base theme.
  </p>
</div>
      </div>
    </div>
  </div>


<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-11493178-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

</body>
</html>
